(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{18:function(e,t,n){e.exports={BreadBottom:"BurgerIngredient_BreadBottom__17kQL",BreadTop:"BurgerIngredient_BreadTop__3tIus",Seeds1:"BurgerIngredient_Seeds1__2feXf",Seeds2:"BurgerIngredient_Seeds2__1dA-D",Meat:"BurgerIngredient_Meat__2hZl2",Cheese:"BurgerIngredient_Cheese__3Mvx0",Salad:"BurgerIngredient_Salad__1_zFO",Bacon:"BurgerIngredient_Bacon___Lqbw"}},25:function(e,t,n){e.exports={SideDrawer:"SideDrawer_SideDrawer__28CW0",Open:"SideDrawer_Open__JrTIq",Close:"SideDrawer_Close__3y3G3",Logo:"SideDrawer_Logo__1CIPW"}},26:function(e,t,n){e.exports={BuildControl:"BuildControl_BuildControl__17e5i",Label:"BuildControl_Label__3_HNr",Less:"BuildControl_Less__1amXZ",More:"BuildControl_More__Fli9q"}},27:function(e,t,n){e.exports={Button:"Button_Button__1wrbS",Success:"Button_Success__3DG2D",Danger:"Button_Danger__g-kvA",Info:"Button_Info__3FV0t"}},28:function(e,t,n){e.exports={Input:"Input_Input__1kZBx",Label:"Input_Label__oP906",InputElement:"Input_InputElement__3cTGM",Invalid:"Input_Invalid__1jd4d"}},34:function(e,t,n){e.exports={Logo:"Logo_Logo__3Z7va",Clickable:"Logo_Clickable__3qP4O"}},35:function(e,t,n){e.exports={NavigationItem:"NavigationItem_NavigationItem__1jrra",active:"NavigationItem_active__1vM_X"}},38:function(e,t,n){e.exports={Toolbar:"Toolbar_Toolbar__39hr6",DesktopOnly:"Toolbar_DesktopOnly__1gBGh"}},39:function(e,t,n){e.exports={BuildControls:"BuildControls_BuildControls__3WaLW",OrderButton:"BuildControls_OrderButton__1qzYz",enable:"BuildControls_enable__1S3ZC"}},51:function(e,t,n){e.exports=n.p+"static/media/logo.b44c83b1.png"},53:function(e,t,n){e.exports={NavigationItems:"NavigationItems_NavigationItems__1StfC"}},54:function(e,t,n){e.exports={DrawerToggle:"DrawerToggle_DrawerToggle__3a9Js"}},55:function(e,t,n){e.exports={Content:"Layout_Content__T2kny"}},56:function(e,t,n){e.exports={Backdrop:"Backdrop_Backdrop__2r8AG"}},57:function(e,t,n){e.exports={Burger:"Burger_Burger__2uEki"}},58:function(e,t,n){e.exports={Modal:"Modal_Modal__3xywP"}},59:function(e,t,n){e.exports={Header:"OrderSummary_Header__dZtYF"}},60:function(e,t,n){e.exports={Progress:"Progress_Progress__2b73R",load1:"Progress_load1__3ktUU"}},61:function(e,t,n){e.exports={CheckoutSummary:"CheckoutSummary_CheckoutSummary__1V0I5"}},62:function(e,t,n){e.exports={ContactData:"ContactData_ContactData__3VtY9"}},63:function(e,t,n){e.exports={Order:"Order_Order__368wF"}},64:function(e,t,n){e.exports={Auth:"Auth_Auth__WS9Mu"}},66:function(e,t,n){e.exports=n(96)},71:function(e,t,n){},96:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(29),i=n.n(o),c=n(16),s=(n(71),n(2)),l=n(3),u=n(5),d=n(4),p=n(6),m=n(19),h=n(7),g=n(51),f=n.n(g),v=n(34),b=n.n(v),E=function(e){return a.a.createElement("div",{className:b.a.Logo},a.a.createElement("img",{src:f.a,alt:"BurgerBuilder",onClick:e.onClick,className:e.onClick?b.a.Clickable:""}))},_=n(35),y=n.n(_),O=function(e){return a.a.createElement("li",{className:y.a.NavigationItem},a.a.createElement(c.b,{to:e.link,exact:!0,activeClassName:y.a.active},e.children))},C=n(53),k=n.n(C),I=function(e){return a.a.createElement("ul",{className:k.a.NavigationItems},a.a.createElement(O,{link:"/"},"Bugrer Builder"),e.isAuthenticated&&a.a.createElement(O,{link:"/orders"},"Orders"),e.isAuthenticated?a.a.createElement(O,{link:"/logout"},"Logout"):a.a.createElement(O,{link:"/auth"},"Sign Up"))},j=n(54),S=n.n(j),T=function(e){return a.a.createElement("div",{className:S.a.DrawerToggle,onClick:e.onClick},a.a.createElement("div",null),a.a.createElement("div",null),a.a.createElement("div",null))},B=n(38),N=n.n(B),w=Object(m.g)(function(e){return a.a.createElement("header",{className:N.a.Toolbar},a.a.createElement(T,{onClick:e.drawerToggleClicked}),a.a.createElement(E,{onClick:function(){return e.history.push("/")}}),a.a.createElement("nav",{className:N.a.DesktopOnly},a.a.createElement(I,{isAuthenticated:e.isAuthenticated})))}),A=n(55),D=n.n(A),R=n(25),H=n.n(R),x=n(56),L=n.n(x),U=function(e){return e.isOpen?a.a.createElement("div",{className:L.a.Backdrop,onClick:e.onClick}):null},P=function(e){var t=[H.a.SideDrawer,e.isOpen?H.a.Open:H.a.Close].join(" ");return a.a.createElement(a.a.Fragment,null,a.a.createElement(U,{isOpen:e.isOpen,onClick:e.close}),a.a.createElement("div",{className:t},a.a.createElement("div",{className:H.a.Logo},a.a.createElement(E,null)),a.a.createElement("nav",null,a.a.createElement(I,{isAuthenticated:e.isAuthenticated}))))},F=function(e){function t(){var e,n;Object(s.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(a)))).state={isSideDrawerOpen:!1},n.sideDrawerClosedHandler=function(){n.setState({isSideDrawerOpen:!1})},n.sideDrawerToggleHandler=function(){n.setState(function(e){return{isSideDrawerOpen:!e.isSideDrawerOpen}})},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(w,{isAuthenticated:this.props.isAuthenticated,drawerToggleClicked:this.sideDrawerToggleHandler}),a.a.createElement(P,{isAuthenticated:this.props.isAuthenticated,isOpen:this.state.isSideDrawerOpen,close:this.sideDrawerClosedHandler}),a.a.createElement("main",{className:D.a.Content},this.props.children))}}]),t}(r.Component),M=Object(h.b)(function(e){return{isAuthenticated:!!e.auth.idToken}},null)(F),G=n(1),q=n(8),V=n.n(q),Y=n(11),W=n(23),z=n(18),Z=n.n(z),X=function(e){var t;switch(e.type){case"bread-bottom":t=a.a.createElement("div",{className:Z.a.BreadBottom});break;case"bread-top":t=a.a.createElement("div",{className:Z.a.BreadTop},a.a.createElement("div",{className:Z.a.Seeds1}),a.a.createElement("div",{className:Z.a.Seeds2}));break;case"meat":t=a.a.createElement("div",{className:Z.a.Meat});break;case"cheese":t=a.a.createElement("div",{className:Z.a.Cheese});break;case"salad":t=a.a.createElement("div",{className:Z.a.Salad});break;case"bacon":t=a.a.createElement("div",{className:Z.a.Bacon});break;default:t=null}return t},J=n(57),K=n.n(J),$=function(e){var t=Object.keys(e.ingredients).map(function(t){var n=parseInt(e.ingredients[t]);return Object(W.a)(Array(n)).map(function(e,n){return a.a.createElement(X,{key:t+n,type:t})})}).reduce(function(e,t){return[].concat(Object(W.a)(e),Object(W.a)(t))},[]);return a.a.createElement("div",{className:K.a.Burger},a.a.createElement(X,{type:"bread-top"}),t.length>0?t:a.a.createElement("p",null,"NO INGREDIENTS ADDED"),a.a.createElement(X,{type:"bread-bottom"}))},Q=n(26),ee=n.n(Q),te=function(e){return a.a.createElement("div",{className:ee.a.BuildControl},a.a.createElement("div",{className:ee.a.Label},e.label),a.a.createElement("button",{className:ee.a.Less,onClick:e.lessButtonHandler,disabled:e.disabled},"Less"),a.a.createElement("button",{className:ee.a.More,onClick:e.moreButtonHandler},"More"))},ne=n(39),re=n.n(ne),ae=[{label:"Salad",type:"salad"},{label:"Bacon",type:"bacon"},{label:"Cheese",type:"cheese"},{label:"Meat",type:"meat"}],oe=function(e){return a.a.createElement("div",{className:re.a.BuildControls},a.a.createElement("p",null,"Price: ",a.a.createElement("strong",null,e.price.toFixed(2),"$")),ae.map(function(t){return a.a.createElement(te,{key:t.label,label:t.label,moreButtonHandler:function(){return e.ingredientAdded(t.type)},lessButtonHandler:function(){return e.ingredientRemoved(t.type)},disabled:e.disabledInfo[t.type]})}),a.a.createElement("button",{className:re.a.OrderButton,disabled:!e.isOrderable,onClick:e.orderButtonHandler},"ORDER"))},ie=n(58),ce=n.n(ie),se=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"shouldComponentUpdate",value:function(e,t){return e.isOpen!==this.props.isOpen||e.children!==this.props.children}},{key:"render",value:function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(U,{isOpen:this.props.isOpen,onClick:this.props.closeHandler}),a.a.createElement("div",{className:ce.a.Modal,style:{transform:this.props.isOpen?"translateY(0)":"translateY(-100vh)",opacity:this.props.isOpen?"1":"0"}},this.props.children))}}]),t}(r.Component),le=n(27),ue=n.n(le),de=function(e){return a.a.createElement("button",{className:[ue.a.Button,"success"===e.type?ue.a.Success:"danger"===e.type?ue.a.Danger:"info"===e.type?ue.a.Info:""].join(" "),onClick:e.onClick,disabled:e.disabled},e.children)},pe=n(59),me=n.n(pe),he=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=Object.keys(this.props.ingredients).map(function(t){return a.a.createElement("li",{key:t+e.props.ingredients[t]},a.a.createElement("span",{style:{textTransform:"capitalize"}},t),": ",e.props.ingredients[t])});return a.a.createElement(a.a.Fragment,null,a.a.createElement("h3",{className:me.a.Header},"Your order"),a.a.createElement("p",null,"Burger with:"),a.a.createElement("ul",null,t),a.a.createElement("p",null,"Total Price: ",a.a.createElement("strong",null,this.props.price.toFixed(2),"$")),a.a.createElement("p",null,"Proceed to checkout?"),a.a.createElement(de,{type:"danger",onClick:this.props.cancelButtonHandler},"CANCEL"),a.a.createElement(de,{type:"success",onClick:this.props.okButtonHandler},"OK"))}}]),t}(r.Component),ge=n(31),fe=n.n(ge),ve=fe.a.create({baseURL:"https://burger-builder-9a45a.firebaseio.com/",validateStatus:function(e){return e>=200&&e<300}}),be=n(60),Ee=n.n(be),_e=function(){return a.a.createElement("div",{className:Ee.a.Progress})},ye=function(e,t){return function(n){function r(){var e;return Object(s.a)(this,r),(e=Object(u.a)(this,Object(d.a)(r).call(this))).state={error:null},e.requestInterceptor=t.interceptors.request.use(function(t){return e.setState({error:null}),t}),e.responseInterceptor=t.interceptors.response.use(function(e){return e},function(t){e.setState({error:t})}),e}return Object(p.a)(r,n),Object(l.a)(r,[{key:"componentWillUnmount",value:function(){t.interceptors.request.eject(this.requestInterceptor),t.interceptors.request.eject(this.responseInterceptor)}},{key:"render",value:function(){var t=this;return a.a.createElement(a.a.Fragment,null,a.a.createElement(se,{isOpen:!!this.state.error,closeHandler:function(){return t.setState({error:null})}},this.state.error&&this.state.error.message),a.a.createElement(e,this.props))}}]),r}(r.Component)},Oe=function(e,t){return{type:"PURCHASE_BURGER_SUCCESS",payload:{orderId:e,orderData:t}}},Ce=function(e){return{type:"FETCH_ORDERS_SUCCESS",payload:{orders:e}}},ke=function(e,t){return{type:"AUTH_SUCCESS",payload:{idToken:e,userId:t}}},Ie=function(){return localStorage.removeItem("idToken"),localStorage.removeItem("expirationDate"),localStorage.removeItem("userId"),{type:"AUTH_LOGOUT"}},je=function(e){return function(t){setTimeout(function(){console.log("User token has been expired"),t(Ie())},1e3*e)}},Se=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).isBurgerOrderable=function(){return!Object.values(n.props.ingredients).every(function(e){return e<=0})},n.orderButtonHandler=function(){if(n.props.isAuthenticated)return n.setState({inOrderMode:!0});n.props.history.push({pathname:"/auth",search:"?order=true"})},n.orderModeOffHandler=function(){n.setState({inOrderMode:!1})},n.proceedToCheckout=Object(Y.a)(V.a.mark(function e(){return V.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n.props.inInitPurchase(),n.props.history.push({pathname:"/checkout"});case 2:case"end":return e.stop()}},e)})),n.state={inOrderMode:!1},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.props.onInitIngredients()}},{key:"render",value:function(){var e=Object(G.a)({},this.props.ingredients);for(var t in e)e[t]=e[t]<=0;return a.a.createElement(a.a.Fragment,null,a.a.createElement(se,{isOpen:this.state.inOrderMode,closeHandler:this.orderModeOffHandler},this.props.ingredients?a.a.createElement(he,{ingredients:this.props.ingredients,price:this.props.totalPrice,cancelButtonHandler:this.orderModeOffHandler,okButtonHandler:this.proceedToCheckout}):null),this.props.error?a.a.createElement("p",null,"Error occured while loading the ingredients. Try refreshing the page or check developer console for details."):this.props.ingredients?a.a.createElement(a.a.Fragment,null,a.a.createElement($,{ingredients:this.props.ingredients}),a.a.createElement(oe,{ingredientAdded:this.props.onIngredientAdded,ingredientRemoved:this.props.onIngredientRemoved,disabledInfo:e,price:this.props.totalPrice,isOrderable:this.isBurgerOrderable(),orderButtonHandler:this.orderButtonHandler})):a.a.createElement(_e,null))}}]),t}(r.Component),Te=Object(h.b)(function(e){return{ingredients:e.burgerBuilder.ingredients,totalPrice:e.burgerBuilder.totalPrice,error:e.burgerBuilder.error,isAuthenticated:!!e.auth.idToken}},function(e){return{onIngredientAdded:function(t){e(function(e){return{type:"ADD_INGREIDENT",payload:{ingredientName:e}}}(t))},onIngredientRemoved:function(t){e(function(e){return{type:"REMOVE_INGREIDENT",payload:{ingredientName:e}}}(t))},onInitIngredients:function(){return e(function(){var e=Object(Y.a)(V.a.mark(function e(t){var n;return V.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ve.get("/ingredients.json");case 3:n=e.sent,t({type:"SET_INGREDIENTS",payload:{ingredients:n.data}}),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0),t({type:"FETCH_INGREDIENTS_FAILED"});case 11:case"end":return e.stop()}},e,null,[[0,7]])}));return function(t){return e.apply(this,arguments)}}())},inInitPurchase:function(){return e({type:"PURCHASE_INIT"})}}})(ye(Se,ve)),Be=n(61),Ne=n.n(Be),we=Object(h.b)(function(e){return{price:e.burgerBuilder.totalPrice}},null)(function(e){var t=e.price;return a.a.createElement("div",{className:Ne.a.CheckoutSummary},a.a.createElement("h1",null,"Your order (",t&&Number(t).toFixed(2),"$)"),a.a.createElement("div",{style:{width:"100%",margin:"auto"}},a.a.createElement($,{ingredients:e.ingredients})),a.a.createElement(de,{type:"danger",onClick:e.onCheckoutCancelled},"CANCEL"),a.a.createElement(de,{type:"success",onClick:e.onCheckoutContinued},"OK"))}),Ae=n(28),De=n.n(Ae),Re=function(e){var t=null,n=[De.a.InputElement];switch(e.invalid&&n.push(De.a.Invalid),e.elementType){case"select":t=a.a.createElement("select",{onChange:e.onChange,className:n.join(" "),value:e.value},e.elementConfig.options.map(function(e){return a.a.createElement("option",{key:e.value,value:e.value},e.displayValue)}));break;case"input":default:t=a.a.createElement("input",Object.assign({onChange:e.onChange,className:n.join(" "),type:e.elementType},e.elementConfig,{value:e.value}))}return a.a.createElement("div",{className:De.a.Input},a.a.createElement("label",{className:De.a.Label},e.label),t)},He=n(62),xe=n.n(He),Le=function(e){function t(){var e,n;Object(s.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(a)))).state={orderForm:{name:{elementType:"input",elementConfig:{type:"text",placeholder:"Your Name"},value:"",validationRules:{required:!0},valid:!1,touched:!1},street:{elementType:"input",elementConfig:{type:"text",placeholder:"Street"},value:"",validationRules:{required:!0},valid:!1,touched:!1},zipCode:{elementType:"input",elementConfig:{type:"text",placeholder:"ZIP Code"},value:"",validationRules:{required:!0},valid:!1,touched:!1},country:{elementType:"input",elementConfig:{type:"text",placeholder:"Country"},value:"",validationRules:{required:!0},valid:!1,touched:!1},email:{elementType:"input",elementConfig:{type:"email",placeholder:"Your email"},value:"",validationRules:{required:!0},valid:!1,touched:!1},deliveryMethod:{elementType:"select",elementConfig:{options:[{value:"fastest",displayValue:"Fastest"},{value:"chipest",displayValue:"Chipest"}]},value:"fastest",validationRules:null,valid:!0,touched:!1}},isFormValid:!1},n.orderHandler=function(){var e=Object(Y.a)(V.a.mark(function e(t){var r,a,o;return V.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(a in t.preventDefault(),r={},n.state.orderForm)r[a]=n.state.orderForm[a].value;o={ingredients:n.props.ingredients,orderData:r,userId:n.props.userId},n.props.onOrderBurger(o,n.props.idToken);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n.inputChangeHandler=function(e,t){var r=Object(G.a)({},n.state.orderForm),a=Object(G.a)({},r[t]);a.value=e.target.value,a.valid=n.checkValidity(a.value,a.validationRules),a.touched=!0,r[t]=a;var o=!0;for(var i in r)o=r[i].valid&&o;n.setState({orderForm:r,formIsValid:o})},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"checkValidity",value:function(e,t){var n=!0;return t?(t.required&&(n=""!==e.trim()&&n),n):n}},{key:"render",value:function(){var e=this,t=[];for(var n in this.state.orderForm)t.push({id:n,config:this.state.orderForm[n]});return a.a.createElement("div",{className:xe.a.ContactData},a.a.createElement("h4",null,"Enter your contact data"),this.props.isLoading?a.a.createElement(_e,null):a.a.createElement("form",{onSubmit:this.orderHandler},t.map(function(t){return a.a.createElement(Re,{key:t.id,elementType:t.config.elementType,elementConfig:t.config.elementConfig,value:t.config.value,onChange:function(n){return e.inputChangeHandler(n,t.id)},invalid:t.config.validationRules&&t.config.touched&&!t.config.valid})}),a.a.createElement(de,{type:"success",disabled:!this.state.formIsValid},"ORDER")))}}]),t}(r.Component),Ue=Object(h.b)(function(e){return{ingredients:e.burgerBuilder.ingredients,isLoading:e.order.isLoading,idToken:e.auth.idToken,userId:e.auth.userId}},function(e){return{onOrderBurger:function(t,n){return e(function(e,t){return function(){var n=Object(Y.a)(V.a.mark(function n(r){var a;return V.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r({type:"PURCHASE_BURGER_START"}),n.prev=1,n.next=4,ve.post("/orders.json",e,{params:{auth:t}});case 4:a=n.sent,console.log("Successfully posted an order",a),r(Oe(a.data.name,e)),n.next=13;break;case 9:n.prev=9,n.t0=n.catch(1),console.error(n.t0),r({type:"PURCHASE_BURGER_FAIL",payload:{error:n.t0}});case 13:case"end":return n.stop()}},n,null,[[1,9]])}));return function(e){return n.apply(this,arguments)}}()}(t,n))}}})(ye(Le,ve)),Pe=function(e){function t(){var e,n;Object(s.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(a)))).checkoutCancelledHandler=function(){n.props.history.goBack()},n.checkoutContinuedHandler=function(){n.props.history.replace("/checkout/contact-data")},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return a.a.createElement("div",null,this.props.ingredients?this.props.isPurchased?a.a.createElement(m.a,{to:"/orders"}):a.a.createElement(we,{ingredients:this.props.ingredients,onCheckoutCancelled:this.checkoutCancelledHandler,onCheckoutContinued:this.checkoutContinuedHandler,price:this.props.totalPrice}):a.a.createElement(m.a,{to:"/"}),a.a.createElement(m.b,{path:"".concat(this.props.match.path,"/contact-data"),component:Ue}))}}]),t}(r.Component),Fe=Object(h.b)(function(e){return{ingredients:e.burgerBuilder.ingredients,isPurchased:e.order.isPurchased}},null)(Pe),Me=n(63),Ge=n.n(Me),qe=function(e){var t=[];for(var n in e.ingredients)t.push({name:n,count:e.ingredients[n]});return a.a.createElement("div",{className:Ge.a.Order},a.a.createElement("p",null,"Ingredients: "),t.map(function(e){return a.a.createElement("span",{key:e.name,style:{textTransform:"capitalize",display:"inline-block",padding:"3px",margin:"0 8px",border:"1px solid gray"}},e.name," (",e.count,")")}))},Ve=function(e){function t(){var e,n;Object(s.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(a)))).updateOrders=Object(Y.a)(V.a.mark(function e(){var t,r,a;return V.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.prev=1,e.next=4,ve.get("/orders.json");case 4:for(a in(r=e.sent).data)t.push(Object(G.a)({},r.data[a],{id:a}));console.log(r),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0);case 12:return e.prev=12,n.setState({isLoading:!1,orders:t}),e.finish(12);case 15:case"end":return e.stop()}},e,null,[[1,9,12,15]])})),n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.props.onFetchOrders(this.props.idToken,this.props.userId)}},{key:"render",value:function(){return this.props.error?a.a.createElement("p",null,"Error occured"):this.props.isLoading?a.a.createElement(_e,null):a.a.createElement("div",null,this.props.orders.map(function(e){return a.a.createElement(qe,{key:e.id,ingredients:e.ingredients})}))}}]),t}(r.Component),Ye=ye(Object(h.b)(function(e){return{orders:e.order.orders,idToken:e.auth.idToken,userId:e.auth.userId,isLoading:e.order.isLoading,error:e.order.fetchError}},function(e){return{onFetchOrders:function(t,n){return e(function(e,t){return function(){var n=Object(Y.a)(V.a.mark(function n(r){var a,o,i;return V.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r({type:"FETCH_ORDERS_START"}),a=[],n.prev=2,n.next=5,ve.get("/orders.json",{params:{auth:e,orderBy:'"userId"',equalTo:'"'.concat(t,'"')}});case 5:if(o=n.sent){n.next=8;break}throw Error();case 8:for(i in o.data)a.push(Object(G.a)({},o.data[i],{id:i}));console.log(o),r(Ce(a)),n.next=17;break;case 13:n.prev=13,n.t0=n.catch(2),console.error(n.t0),r({type:"FETCH_ORDERS_FAIL",payload:{error:n.t0}});case 17:case"end":return n.stop()}},n,null,[[2,13]])}));return function(e){return n.apply(this,arguments)}}()}(t,n))}}})(Ve),ve),We=n(20),ze=n(64),Ze=n.n(ze),Xe=function(e){function t(){var e,n;Object(s.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(a)))).state={controls:{email:{elementType:"input",elementConfig:{type:"email",placeholder:"Mail Adress"},value:"",validationRules:{required:!0},valid:!1,touched:!1},password:{elementType:"input",elementConfig:{type:"password",placeholder:"Password"},value:"",validationRules:{required:!0,minLength:6},valid:!1,touched:!1}},isSignUp:!0},n.inputChangeHandler=function(e,t){var r=Object(G.a)({},n.state.controls,Object(We.a)({},t,Object(G.a)({},n.state.controls[t],{value:e.target.value,valid:n.checkValidity(e.target.value,n.state.controls[t].validationRules),touched:!0})));n.setState({controls:r})},n.submitHandler=function(e){e.preventDefault();var t=n.state.controls.email.value,r=n.state.controls.password.value,a=n.state.isSignUp;n.props.onAuth(t,r,a)},n.switchAuthModeHandler=function(){n.setState(function(e){return{isSignUp:!e.isSignUp}})},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"checkValidity",value:function(e,t){var n=!0;return t?(t.required&&(n=""!==e.trim()&&n),t.minLength&&(n=e.length>=t.minLength&&n),n):n}},{key:"render",value:function(){return this.props.isAuthenticated?a.a.createElement(m.a,{to:this.props.history.location.search?"/checkout":"/"}):a.a.createElement("div",{className:Ze.a.Auth},this.errorMessage,a.a.createElement("form",{onSubmit:this.submitHandler},a.a.createElement("h1",null,this.state.isSignUp?"Create New Account":"Sign In"),this.props.isLoading?a.a.createElement(_e,null):this.formControls,a.a.createElement(de,{type:"success"},"SUBMIT")),a.a.createElement("p",null,this.state.isSignUp?"Already have an account?":"Dont have an account?"," "),a.a.createElement(de,{onClick:this.switchAuthModeHandler,type:"info"},this.state.isSignUp?"SIGN IN":"SIGN UP"))}},{key:"formControls",get:function(){var e=this,t=[];for(var n in this.state.controls)t.push({id:n,config:this.state.controls[n]});return t.map(function(t){return a.a.createElement(Re,{key:t.id,elementType:t.config.elementType,elementConfig:t.config.elementConfig,value:t.config.value,onChange:function(n){return e.inputChangeHandler(n,t.id)},invalid:t.config.validationRules&&t.config.touched&&!t.config.valid})})}},{key:"errorMessage",get:function(){return this.props.error&&a.a.createElement("p",null,this.props.error.message)}}]),t}(r.Component),Je=Object(h.b)(function(e){return{isLoading:e.auth.isLoading,error:e.auth.error,isAuthenticated:!!e.auth.idToken,isBuilderTouched:e.burgerBuilder.isTouched}},function(e){return{onAuth:function(t,n,r){return e(function(e,t,n){return function(){var r=Object(Y.a)(V.a.mark(function r(a){var o,i,c,s,l,u,d,p;return V.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return a({type:"AUTH_START"}),o={email:e,password:t,returnSecureToken:!0},i="AIzaSyBK2uGrhN67-EyvziY8qQKpvv1iTSjhEIU",c=n?"https://identitytoolkit.googleapis.com/v1/accounts:signUp?key=".concat(i):"https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=".concat(i),r.prev=4,r.next=7,fe.a.post(c,o);case 7:s=r.sent,l=s.data,u=l.idToken,d=l.localId,p=l.expiresIn,localStorage.setItem("idToken",u),localStorage.setItem("expirationDate",new Date((new Date).getTime()+1e3*p)),localStorage.setItem("userId",d),a(ke(u,d)),a(je(p)),r.next=20;break;case 16:r.prev=16,r.t0=r.catch(4),console.error(r.t0),a({type:"AUTH_FAIL",payload:{error:r.t0.response.data.error}});case 20:case"end":return r.stop()}},r,null,[[4,16]])}));return function(e){return r.apply(this,arguments)}}()}(t,n,r))}}})(Xe),Ke=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.props.onLogout()}},{key:"render",value:function(){return a.a.createElement(m.a,{to:"/"})}}]),t}(r.Component),$e=Object(h.b)(null,function(e){return{onLogout:function(){return e(Ie())}}})(Ke),Qe=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.props.onTryAutoSignUp()}},{key:"render",value:function(){return a.a.createElement("div",null,a.a.createElement(M,null,a.a.createElement(m.d,null,this.props.isAuthenticated&&a.a.createElement(m.b,{path:"/checkout",component:Fe}),this.props.isAuthenticated&&a.a.createElement(m.b,{path:"/orders",component:Ye}),this.props.isAuthenticated&&a.a.createElement(m.b,{path:"/logout",component:$e}),a.a.createElement(m.b,{path:"/auth",component:Je}),a.a.createElement(m.b,{path:"/",exact:!0,component:Te}),a.a.createElement(m.a,{to:"/"}))))}}]),t}(r.Component),et=Object(h.b)(function(e){return{isAuthenticated:!!e.auth.idToken}},function(e){return{onTryAutoSignUp:function(){return e(function(e){var t=localStorage.getItem("idToken"),n=localStorage.getItem("expirationDate"),r=localStorage.getItem("userId"),a=n&&new Date(n),o=new Date;if(!t||!n||!r||a&&a<o)return e(Ie());e(ke(t,r)),e(je(a/1e3-o/1e3))})}}})(Qe);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var tt=n(21),nt=n(65),rt={salad:.5,cheese:.4,meat:1.3,bacon:.7},at={ingredients:null,totalPrice:4,isTouched:!1,error:!1},ot=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:at,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_INGREIDENT":return Object(G.a)({},e,{ingredients:Object(G.a)({},e.ingredients,Object(We.a)({},t.payload.ingredientName,e.ingredients[t.payload.ingredientName]+1)),totalPrice:e.totalPrice+rt[t.payload.ingredientName],isTouched:!0});case"REMOVE_INGREIDENT":return e.ingredients[t.payload.ingredientName]<=0?e:Object(G.a)({},e,{ingredients:Object(G.a)({},e.ingredients,Object(We.a)({},t.payload.ingredientName,e.ingredients[t.payload.ingredientName]-1)),totalPrice:e.totalPrice-rt[t.payload.ingredientName],isTouched:!0});case"SET_INGREDIENTS":return Object(G.a)({},e,{ingredients:{salad:t.payload.ingredients.salad,bacon:t.payload.ingredients.bacon,cheese:t.payload.ingredients.cheese,meat:t.payload.ingredients.meat},totalPrice:4,error:!1,isTouched:!1});case"FETCH_INGREDIENTS_FAILED":return Object(G.a)({},e,{error:!0});default:return e}},it={orders:[],isLoading:!1,isPurchased:!1,fetchError:null},ct=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:it,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PURCHASE_INIT":return Object(G.a)({},e,{isPurchased:!1});case"PURCHASE_BURGER_START":return Object(G.a)({},e,{isLoading:!0});case"PURCHASE_BURGER_SUCCESS":var n=Object(G.a)({},t.payload.orderData,{id:t.payload.orderId});return Object(G.a)({},e,{isLoading:!1,isPurchased:!0,orders:[].concat(Object(W.a)(e.orders),[n])});case"PURCHASE_BURGER_FAIL":return Object(G.a)({},e,{isLoading:!1});case"FETCH_ORDERS_START":return Object(G.a)({},e,{isLoading:!0});case"FETCH_ORDERS_SUCCESS":return Object(G.a)({},e,{orders:t.payload.orders,isLoading:!1,fetchError:!1});case"FETCH_ORDERS_FAIL":return Object(G.a)({},e,{isLoading:!1,fetchError:!0});default:return e}},st={idToken:null,userId:null,error:null,isLoading:!1},lt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:st,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"AUTH_START":return Object(G.a)({},e,{error:null,isLoading:!0});case"AUTH_SUCCESS":return Object(G.a)({},e,{idToken:t.payload.idToken,userId:t.payload.userId,error:null,isLoading:!1});case"AUTH_FAIL":return Object(G.a)({},e,{error:t.payload.error,isLoading:!1});case"AUTH_LOGOUT":return Object(G.a)({},e,{idToken:null,userId:null});default:return e}},ut=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||tt.d,dt=Object(tt.c)({burgerBuilder:ot,order:ct,auth:lt}),pt=Object(tt.e)(dt,ut(Object(tt.a)(nt.a)));i.a.render(a.a.createElement(h.a,{store:pt},a.a.createElement(c.a,{basename:"/BurgerBuilderReact"},a.a.createElement(et,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[66,1,2]]]);
//# sourceMappingURL=main.395a69d5.chunk.js.map